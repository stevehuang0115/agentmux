(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2587:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(5155),s=n(2115),o=n(9829);class a{connect(){var e;return(null==(e=this.socket)?void 0:e.connected)||this.isConnecting||(this.isConnecting=!0,this.socket=(0,o.io)("http://localhost:3001",{autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),this.socket.on("connect",()=>{var e;console.log("Socket connected:",null==(e=this.socket)?void 0:e.id),this.isConnecting=!1}),this.socket.on("disconnect",e=>{console.log("Socket disconnected:",e),this.isConnecting=!1}),this.socket.on("connect_error",e=>{console.error("Socket connection error:",e),this.isConnecting=!1})),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.isConnecting=!1}getSocket(){return this.socket}async listSessions(){return new Promise((e,t)=>{var n;if(!(null==(n=this.socket)?void 0:n.connected))return void t(Error("Socket not connected"));this.socket.emit("list-sessions",n=>{n.success&&n.data?e(n.data):t(Error(n.error||"Failed to list sessions"))})})}async sendMessage(e){return new Promise((t,n)=>{var r;if(!(null==(r=this.socket)?void 0:r.connected))return void n(Error("Socket not connected"));this.socket.emit("send-message",e,e=>{e.success?t(!0):n(Error(e.error||"Failed to send message"))})})}async capturePane(e,t,n,r){return new Promise((s,o)=>{var a;if(!(null==(a=this.socket)?void 0:a.connected))return void o(Error("Socket not connected"));this.socket.emit("capture-pane",{session:e,window:t,pane:n,lines:r},e=>{e.success&&void 0!==e.data?s(e.data):o(Error(e.error||"Failed to capture pane"))})})}async createWindow(e,t,n){return new Promise((r,s)=>{var o;if(!(null==(o=this.socket)?void 0:o.connected))return void s(Error("Socket not connected"));this.socket.emit("create-window",{session:e,name:t,workingDir:n},e=>{e.success?r(!0):s(Error(e.error||"Failed to create window"))})})}async killWindow(e,t){return new Promise((n,r)=>{var s;if(!(null==(s=this.socket)?void 0:s.connected))return void r(Error("Socket not connected"));this.socket.emit("kill-window",{session:e,window:t},e=>{e.success?n(!0):r(Error(e.error||"Failed to kill window"))})})}constructor(){this.socket=null,this.isConnecting=!1}}let c=new a;var l=n(5959),i=n(9863);let d={autoRefresh:!0,refreshInterval:5e3,maxTerminalHistory:1e3,theme:"auto",terminalFontSize:14,terminalFontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace'},u={sessions:[],selectedSession:null,selectedWindow:null,terminals:new Map,activeTerminal:null,captureContent:new Map,activeCaptureTargets:new Set,isLoading:!1,error:null,sidebarOpen:!0,settings:d,isConnected:!1,connectionStatus:"disconnected"},m=(0,l.v)()((0,i.Zr)((e,t)=>({...u,setSessions:t=>e({sessions:t}),selectSession:t=>e({selectedSession:t,selectedWindow:null}),selectWindow:t=>e({selectedWindow:t}),updateSession:(t,n)=>e(e=>({sessions:e.sessions.map(e=>e.name===t?{...e,...n}:e)})),addTerminal:t=>e(e=>{let n=new Map(e.terminals);return n.set(t.id,t),{terminals:n}}),removeTerminal:t=>e(e=>{let n=new Map(e.terminals);return n.delete(t),{terminals:n,activeTerminal:e.activeTerminal===t?null:e.activeTerminal}}),updateTerminal:(t,n)=>e(e=>{let r=new Map(e.terminals),s=r.get(t);return s&&r.set(t,{...s,...n}),{terminals:r}}),appendTerminalOutput:(t,n)=>e(e=>{let r=new Map(e.terminals),s=r.get(t);if(s){let o=[...s.output,n],a=e.settings.maxTerminalHistory;o.length>a&&o.splice(0,o.length-a),r.set(t,{...s,output:o,lastActivity:new Date})}return{terminals:r}}),setActiveTerminal:t=>e({activeTerminal:t}),setCaptureContent:(t,n)=>e(e=>{let r=new Map(e.captureContent);return r.set(t,n),{captureContent:r}}),clearCaptureContent:t=>e(e=>{let n=new Map(e.captureContent);return n.delete(t),{captureContent:n}}),addCaptureTarget:t=>e(e=>{let n=new Set(e.activeCaptureTargets);return n.add(t),{activeCaptureTargets:n}}),removeCaptureTarget:t=>e(e=>{let n=new Set(e.activeCaptureTargets);return n.delete(t),{activeCaptureTargets:n}}),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),clearError:()=>e({error:null}),setSidebarOpen:t=>e({sidebarOpen:t}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),updateSettings:t=>e(e=>({settings:{...e.settings,...t}})),resetSettings:()=>e({settings:d}),setConnectionStatus:t=>e({connectionStatus:t,isConnected:"connected"===t}),setConnected:t=>e({isConnected:t,connectionStatus:t?"connected":"disconnected"}),reset:()=>e(u)}),{name:"agentmux-store",partialize:e=>({settings:e.settings,sidebarOpen:e.sidebarOpen,selectedSession:e.selectedSession,selectedWindow:e.selectedWindow})})),x=(0,s.createContext)(null),h=e=>{let{children:t}=e;console.log("\uD83D\uDCE6 WebSocketProvider rendering");let n=(()=>{var e;console.log("\uD83D\uDE80 useWebSocket hook initialized",new Date().toISOString(),"Stack:",null==(e=Error().stack)?void 0:e.split("\n")[2]);let{setSessions:t,setConnectionStatus:n,setConnected:r,setLoading:o,setError:a,addTerminal:l,updateTerminal:i,removeTerminal:d,setCaptureContent:u,clearCaptureContent:x}=m(),[h,p]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1),[b,v]=(0,s.useState)(new Map),[w,y]=(0,s.useState)(new Map),[k,j]=(0,s.useState)(null),C=(0,s.useRef)(null),S=(0,s.useRef)(new Map),N=(0,s.useRef)(new Map),E=(0,s.useCallback)(()=>{let{isConnected:e,connectionStatus:t}=m.getState();if(!e&&"connecting"!==t){n("connecting"),j(null),a(null);try{let e=c.connect();C.current=e,p(e),e.on("connect",()=>{console.log("WebSocket connected"),n("connected"),r(!0),j(null),a(null)}),e.on("disconnect",e=>{console.log("WebSocket disconnected:",e),n("disconnected"),r(!1)}),e.on("connect_error",e=>{console.error("WebSocket connection error:",e);let t="Connection failed: ".concat(e.message);j(t),a(t),n("error")}),e.on("terminal-output",e=>{v(t=>{let n=new Map(t),r=n.get(e.terminalId);return r&&(r.output.push(e.data),r.output.length>1e3&&(r.output=r.output.slice(-1e3))),S.current=n,n})}),e.on("terminal-exit",e=>{console.log("Terminal ".concat(e.terminalId," exited with code ").concat(e.code)),v(t=>{let n=new Map(t);return n.delete(e.terminalId),S.current=n,n})}),e.on("capture-update",e=>{y(t=>{let n=new Map(t);return n.set(e.target,e.content),N.current=n,n})}),e.on("capture-error",e=>{console.error("Capture error for ".concat(e.target,":"),e.error),j("Capture error: ".concat(e.error))}),e.on("capture-started",e=>{console.log("Started capturing ".concat(e.target))}),e.on("capture-stopped",e=>{console.log("Stopped capturing ".concat(e.target)),y(t=>{let n=new Map(t);return n.delete(e.target),N.current=n,n})}),e.on("error",e=>{j(e.message)})}catch(t){console.error("Failed to connect to WebSocket:",t);let e=t instanceof Error?t.message:"Connection failed";j(e),a(e),n("error")}}},[]);(0,s.useEffect)(()=>(console.log("\uD83D\uDD04 useWebSocket useEffect triggered"),(async()=>{try{let e=await fetch("http://localhost:3001/api/sessions");if(e.ok){let s=await e.json();s.success&&s.data&&(t(s.data),a(null),n("connected"),r(!0))}}catch(e){console.error("❌ Initial API load failed:",e),a("Failed to load sessions via API")}})(),E(),()=>{C.current&&C.current.disconnect()}),[]);let F=(0,s.useCallback)(async()=>{f(!0),o(!0);try{let e=await fetch("http://localhost:3001/api/sessions");if(!e.ok)throw Error("HTTP ".concat(e.status));let s=await e.json();if(!s.success)throw Error(s.error||"API request failed");let o=s.data;t(o),j(null),a(null),n("connected"),r(!0)}catch(t){let e=t instanceof Error?t.message:"Failed to load sessions";throw console.error("❌ Session refresh failed:",e),j(e),a(e),n("error"),r(!1),Error(e)}finally{f(!1),o(!1)}},[]),W=(0,s.useCallback)(async e=>{if(!(null==h?void 0:h.connected))throw Error("WebSocket not connected");try{await c.sendMessage(e),j(null)}catch(t){let e=t instanceof Error?t.message:"Failed to send message";throw j(e),Error(e)}},[h]),M=(0,s.useCallback)(async(e,t,n,r)=>{if(!(null==h?void 0:h.connected))throw Error("WebSocket not connected");try{let s=await c.capturePane(e,t,n,r);return j(null),s}catch(t){let e=t instanceof Error?t.message:"Failed to capture pane";throw j(e),Error(e)}},[h]),T=(0,s.useCallback)(async(e,t,n)=>{if(!(null==h?void 0:h.connected))throw Error("WebSocket not connected");try{await c.createWindow(e,t,n),await F(),j(null)}catch(t){let e=t instanceof Error?t.message:"Failed to create window";throw j(e),Error(e)}},[h,F]),D=(0,s.useCallback)(async(e,t)=>{if(!(null==h?void 0:h.connected))throw Error("WebSocket not connected");try{await c.killWindow(e,t),await F(),j(null)}catch(t){let e=t instanceof Error?t.message:"Failed to kill window";throw j(e),Error(e)}},[h,F]),I=(0,s.useCallback)(async(e,t,n,r)=>{if(!(null==h?void 0:h.connected))throw Error("WebSocket not connected");return new Promise((s,o)=>{h.emit("create-terminal",{sessionName:e,windowName:t,cols:n,rows:r},n=>{if(n.success&&n.terminalId){let r={id:n.terminalId,sessionName:e,windowName:t,output:[],created:new Date,lastActivity:new Date};v(e=>{let t=new Map(e);return t.set(n.terminalId,r),S.current=t,t}),s(n.terminalId)}else o(Error(n.error||"Failed to create terminal"))})})},[h]),P=(0,s.useCallback)((e,t)=>{if(!(null==h?void 0:h.connected))return void j("WebSocket not connected");h.emit("terminal-input",{terminalId:e,input:t})},[h]),A=(0,s.useCallback)((e,t,n)=>{if(!(null==h?void 0:h.connected))return void j("WebSocket not connected");h.emit("resize-terminal",{terminalId:e,cols:t,rows:n})},[h]),O=(0,s.useCallback)(e=>{if(!(null==h?void 0:h.connected))return void j("WebSocket not connected");h.emit("kill-terminal",{terminalId:e}),v(t=>{let n=new Map(t);return n.delete(e),S.current=n,n})},[h]),L=(0,s.useCallback)((e,t,n,r)=>{if(!(null==h?void 0:h.connected))return void j("WebSocket not connected");h.emit("start-capture",{session:e,window:t,pane:n,interval:r})},[h]),R=(0,s.useCallback)(e=>{if(!(null==h?void 0:h.connected))return void j("WebSocket not connected");h.emit("stop-capture",{target:e})},[h]),_=(0,s.useCallback)(()=>{j(null)},[]),z=m();return{isConnected:z.isConnected,isConnecting:"connecting"===z.connectionStatus,socket:h,sessions:z.sessions,loadingSessions:g,refreshSessions:F,sendMessage:W,capturePane:M,createWindow:T,killWindow:D,terminals:b,createTerminal:I,sendTerminalInput:P,resizeTerminal:A,killTerminal:O,startCapture:L,stopCapture:R,captureContent:w,error:k,clearError:_}})();return(0,r.jsx)(x.Provider,{value:n,children:t})},p=()=>{let e=(0,s.useContext)(x);if(!e)throw Error("useWebSocketContext must be used within WebSocketProvider");return e},g=e=>{let{terminalId:t,sessionName:n,windowIndex:o=0,paneIndex:a=0,height:c="400px",className:l=""}=e,i=(0,s.useRef)(null),d=(0,s.useRef)(null),[u,x]=(0,s.useState)(""),[h,g]=(0,s.useState)(!0),{terminals:f,createTerminal:b,sendTerminalInput:v,resizeTerminal:w,startCapture:y,stopCapture:k,captureContent:j,isConnected:C,sendMessage:S}=p(),{settings:N}=m(),[E,F]=(0,s.useState)(t||null),[W,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n&&void 0!==o&&C&&!W&&(console.log("Starting tmux capture for ".concat(n,":").concat(o)),y(n,o,a,1e3),M(!0))},[n,o,a,C,y,W]);let T=E?f.get(E):null,D=(null==T?void 0:T.output.join(""))||"",I=n?"".concat(n,":").concat(o).concat(a?".".concat(a):""):"",P=I&&j.get(I)||"";(0,s.useEffect)(()=>{h&&i.current&&(i.current.scrollTop=i.current.scrollHeight)},[D,P,h]);let A=e=>{if(e.preventDefault(),u.trim()){if(E&&!W)v(E,u+"\r");else if(n&&W)try{S({session:n,window:o,pane:a,message:u})}catch(e){console.error("Failed to send command to tmux:",e)}x("")}},O=e=>{if(E){if(e.ctrlKey&&"c"===e.key){e.preventDefault(),v(E,"\x03");return}if(e.ctrlKey&&"d"===e.key){e.preventDefault(),v(E,"\x04");return}if("ArrowUp"===e.key){e.preventDefault(),v(E,"\x1b[A");return}if("ArrowDown"===e.key){e.preventDefault(),v(E,"\x1b[B");return}if("ArrowLeft"===e.key){e.preventDefault(),v(E,"\x1b[D");return}if("ArrowRight"===e.key){e.preventDefault(),v(E,"\x1b[C");return}}};(0,s.useEffect)(()=>{if(E&&i.current){let e=new ResizeObserver(()=>{var e;let t=null==(e=i.current)?void 0:e.getBoundingClientRect();t&&w(E,Math.floor(t.width/8),Math.floor(t.height/16))});return e.observe(i.current),()=>e.disconnect()}},[E,w]);let L=P||D,R=C&&(E&&!W||n&&W);return(0,r.jsxs)("div",{className:"terminal-viewer ".concat(l),children:[(0,r.jsx)("style",{children:"\n        @keyframes blink {\n          0%, 50% { opacity: 1; }\n          51%, 100% { opacity: 0; }\n        }\n      "}),(0,r.jsxs)("div",{className:"terminal-header bg-gray-800 text-white px-4 py-2 text-sm flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(C?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{children:n?"".concat(n,":").concat(o).concat(a?".".concat(a):""):"Terminal"}),T&&(0,r.jsxs)("span",{className:"text-gray-400",children:["(Terminal: ",null==E?void 0:E.slice(-8),")"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[I&&(0,r.jsx)("button",{onClick:()=>{I&&(W?(k(I),M(!1)):(y(n,o,a,1e3),M(!0)))},className:"px-2 py-1 rounded text-xs ".concat(W?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"),children:W?"Stop Capture":"Start Capture"}),(0,r.jsxs)("button",{onClick:()=>g(!h),className:"px-2 py-1 rounded text-xs ".concat(h?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"),children:["Auto-scroll: ",h?"ON":"OFF"]})]})]}),(0,r.jsxs)("div",{className:"terminal-content bg-black text-green-400 p-4 overflow-auto font-mono text-sm leading-tight cursor-text",style:{height:c,fontSize:"".concat(N.terminalFontSize,"px"),fontFamily:N.terminalFontFamily},tabIndex:0,onClick:()=>{R&&d.current&&d.current.focus()},onKeyDown:e=>{if(R){if(d.current&&1===e.key.length)return void d.current.focus();"Enter"===e.key&&u.trim()&&A({preventDefault:()=>e.preventDefault()})}},children:[(0,r.jsx)("pre",{ref:i,style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:L||(C?W?'<span style="color: #666">Loading tmux content...</span>':'<span style="color: #666">Connecting to tmux...</span>':'<span style="color: #666">Connecting...</span>')}}),R&&u&&(0,r.jsxs)("div",{style:{color:"#0f0",display:"inline"},children:[(0,r.jsxs)("span",{style:{color:"#0f0"},children:["$ ",u]}),(0,r.jsx)("span",{style:{backgroundColor:"#0f0",animation:"blink 1s infinite",width:"8px",height:"16px",display:"inline-block",marginLeft:"2px"}})]})]}),R&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:d,type:"text",value:u,onChange:e=>x(e.target.value),onKeyDown:O,style:{position:"absolute",left:"-9999px",opacity:0,height:"1px",width:"1px"},autoFocus:!0}),(0,r.jsx)("form",{onSubmit:A,className:"terminal-input bg-gray-900 p-2 border-t border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-green-400 font-mono",children:"$"}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),onKeyDown:O,placeholder:"Type command... (or click terminal area above)",className:"flex-1 bg-black text-green-400 font-mono border-none outline-none px-2 py-1"}),(0,r.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",disabled:!u.trim(),children:"Send"})]})})]}),!C&&(0,r.jsx)("div",{className:"terminal-overlay absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-white text-center",children:[(0,r.jsx)("div",{className:"text-xl mb-2",children:"⚠️"}),(0,r.jsx)("div",{children:"Connection lost. Reconnecting..."})]})})]})},f=e=>{let{className:t=""}=e,{sessions:n,isConnected:o,isConnecting:a,loadingSessions:c,refreshSessions:l,sendMessage:i,createWindow:d,killWindow:u,error:x}=p(),{selectedSession:h,selectedWindow:f,selectSession:b,selectWindow:v,sidebarOpen:w,toggleSidebar:y,error:k,clearError:j}=m(),[C,S]=(0,s.useState)(""),[N,E]=(0,s.useState)(""),[F,W]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=!0;l().catch(console.error);let t=setInterval(()=>{e&&l().catch(console.error)},5e3);return()=>{e=!1,clearInterval(t)}},[]),(0,s.useEffect)(()=>{n.length>0&&!h&&b(n[0].name)},[n,h,b]);let M=n.find(e=>e.name===h),T=null==M?void 0:M.windows.find(e=>e.index===f),D=x||k,I=async e=>{if(e.preventDefault(),C.trim()&&h&&null!==f)try{await i({session:h,window:f,message:C}),S("")}catch(e){console.error("Failed to send message:",e)}},P=async e=>{if(e.preventDefault(),N.trim()&&h)try{await d(h,N),E(""),W(!1)}catch(e){console.error("Failed to create window:",e)}},A=async e=>{if(h&&confirm("Kill window ".concat(e,"?")))try{await u(h,e),f===e&&v(0)}catch(e){console.error("Failed to kill window:",e)}};return(0,r.jsxs)("div",{className:"session-dashboard h-full flex ".concat(t),children:[(0,r.jsx)("div",{className:"sidebar bg-gray-100 border-r transition-all duration-300 ".concat(w?"w-80":"w-0 overflow-hidden"),children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold mb-2 flex items-center justify-between",children:["AgentMux Sessions",(0,r.jsx)("button",{onClick:y,className:"text-gray-500 hover:text-gray-700",children:"←"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(o?"bg-green-500":a?"bg-yellow-500":"bg-red-500")}),(0,r.jsx)("span",{children:o?"API Connected":a?"Connecting...":"API Offline"}),o&&(0,r.jsx)("button",{onClick:l,disabled:c,className:"ml-auto text-blue-600 hover:text-blue-800 disabled:opacity-50",children:c?"↻":"⟳"})]})]}),D&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded text-red-700 text-sm",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("span",{children:D}),(0,r.jsx)("button",{onClick:j,className:"text-red-500 hover:text-red-700 ml-2",children:"\xd7"})]})}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Sessions"}),(0,r.jsxs)("div",{className:"space-y-1",children:[n.map(e=>(0,r.jsxs)("button",{onClick:()=>b(e.name),className:"w-full text-left p-2 rounded text-sm transition-colors ".concat(h===e.name?"bg-blue-100 text-blue-900":"hover:bg-gray-50"),children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.windows.length," windows"]})]},e.name)),0===n.length&&(0,r.jsx)("div",{className:"text-gray-500 text-sm py-2",children:c?"Loading...":"No sessions found"})]})]}),M&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"font-medium",children:"Windows"}),(0,r.jsx)("button",{onClick:()=>W(!F),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ New"})]}),F&&(0,r.jsxs)("form",{onSubmit:P,className:"mb-3 p-2 bg-gray-50 rounded",children:[(0,r.jsx)("input",{type:"text",value:N,onChange:e=>E(e.target.value),placeholder:"Window name",className:"w-full px-2 py-1 border rounded text-sm mb-2",autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{type:"submit",disabled:!N.trim(),className:"flex-1 bg-blue-600 text-white py-1 rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:"Create"}),(0,r.jsx)("button",{type:"button",onClick:()=>{W(!1),E("")},className:"flex-1 bg-gray-300 text-gray-700 py-1 rounded text-xs hover:bg-gray-400",children:"Cancel"})]})]}),(0,r.jsx)("div",{className:"space-y-1",children:M.windows.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 rounded text-sm ".concat(f===e.index?"bg-green-100 text-green-900":"hover:bg-gray-50"),children:[(0,r.jsx)("button",{onClick:()=>v(e.index),className:"flex-1 text-left",children:(0,r.jsxs)("div",{className:"font-medium",children:[e.index,": ",e.name,e.active&&(0,r.jsx)("span",{className:"text-green-600 ml-1",children:"●"})]})}),(0,r.jsx)("button",{onClick:()=>A(e.index),className:"text-red-500 hover:text-red-700 px-1",title:"Kill window",children:"\xd7"})]},e.index))})]}),h&&null!==f&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Quick Send"}),(0,r.jsxs)("form",{onSubmit:I,children:[(0,r.jsx)("textarea",{value:C,onChange:e=>S(e.target.value),placeholder:"Enter command...",className:"w-full px-2 py-1 border rounded text-sm mb-2 resize-none",rows:3}),(0,r.jsxs)("button",{type:"submit",disabled:!C.trim(),className:"w-full bg-green-600 text-white py-1 rounded text-sm hover:bg-green-700 disabled:opacity-50",children:["Send to ",h,":",f]})]})]})]})}),(0,r.jsxs)("div",{className:"main-content flex-1 flex flex-col",children:[(0,r.jsxs)("div",{className:"header bg-white border-b px-4 py-3 flex items-center justify-between",children:[!w&&(0,r.jsx)("button",{onClick:y,className:"text-gray-500 hover:text-gray-700",children:"→"}),(0,r.jsx)("div",{className:"flex-1 text-center",children:h&&null!==f?(0,r.jsxs)("h1",{className:"text-lg font-semibold",children:[h,":",f,T&&" - ".concat(T.name)]}):(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-500",children:"Select a session and window"})}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(o?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:o?"ONLINE":"OFFLINE"})})]}),(0,r.jsx)("div",{className:"flex-1 relative",children:h&&null!==f?(0,r.jsx)(g,{sessionName:h,windowIndex:f,height:"100%",className:"h-full"}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDDA5️"}),(0,r.jsx)("div",{className:"text-xl mb-2",children:"No session selected"}),(0,r.jsx)("div",{className:"text-sm",children:0===n.length?"No tmux sessions found. Create a session first.":"Select a session from the sidebar to get started."})]})})})]})]})};function b(){return(0,r.jsx)(h,{children:(0,r.jsx)("div",{className:"h-screen flex flex-col bg-gray-50",children:(0,r.jsx)(f,{className:"flex-1"})})})}},7788:(e,t,n)=>{Promise.resolve().then(n.bind(n,2587))}},e=>{e.O(0,[173,441,255,358],()=>e(e.s=7788)),_N_E=e.O()}]);