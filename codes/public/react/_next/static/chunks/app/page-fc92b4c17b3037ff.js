(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8830:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(5155),r=s(2115);class n{async request(e,t){let s=e.startsWith("/api/")||"/health"===e?"".concat(this.baseURL).concat(e):"".concat(this.baseURL,"/api").concat(e);console.log("\uD83C\uDF10 API Request:",(null==t?void 0:t.method)||"GET",s);let a=await fetch(s,{headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t});if(!a.ok){let e=await a.text();throw console.error("❌ API Response Error:",a.status,e),Error("HTTP ".concat(a.status,": ").concat(e))}let r=await a.json();if(console.log("✅ API Response:",e,r.success?"SUCCESS":"FAILED"),!r.success)throw Error(r.error||"API request failed");return r.data}async health(){return this.request("/health")}async getProjects(){return this.request("/projects")}async createProject(e){return this.request("/projects",{method:"POST",body:JSON.stringify(e)})}async updateProject(e,t){return this.request("/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProject(e){return this.request("/projects/".concat(e),{method:"DELETE"})}async getTeams(){return this.request("/teams")}async createTeam(e){return this.request("/teams",{method:"POST",body:JSON.stringify(e)})}async updateTeam(e,t){return this.request("/teams/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTeam(e){return this.request("/teams/".concat(e),{method:"DELETE"})}async getAssignments(){return this.request("/assignments")}async createAssignment(e){return this.request("/assignments",{method:"POST",body:JSON.stringify(e)})}async updateAssignment(e,t){return this.request("/assignments/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteAssignment(e){return this.request("/assignments/".concat(e),{method:"DELETE"})}async getActivity(){return this.request("/activity")}async refreshActivity(){return this.request("/activity/refresh",{method:"POST"})}async getSpec(e,t){return this.request("/specs/".concat(e,"/").concat(t))}async saveSpec(e,t,s){return this.request("/specs/".concat(e,"/").concat(t),{method:"PUT",body:JSON.stringify({content:s})})}async getAllData(){let[e,t,s]=await Promise.all([this.getProjects(),this.getTeams(),this.getAssignments()]);return{projects:e,teams:t,assignments:s,settings:{pollingInterval:3e4,dataPath:"~/.agentmux/data.json"}}}constructor(){this.baseURL="http://localhost:3001"}}let l=new n,i=(0,r.createContext)(null);function c(e){let{children:t,pollingInterval:s=3e4}=e,[n,c]=(0,r.useState)({projects:[],teams:[],assignments:[],activity:[],loading:!1,isConnected:!1}),d=e=>{console.error("AgentMux API Error:",e),c(t=>({...t,error:e instanceof Error?e.message:"An error occurred",loading:!1,isConnected:!1}))},o=(0,r.useCallback)(async()=>{try{console.log("\uD83D\uDD04 AgentMux: Starting data refresh..."),c(e=>({...e,loading:!0,error:void 0}));let e=await l.getAllData();console.log("\uD83D\uDCCA AgentMux: Received data:",{projects:e.projects.length,teams:e.teams.length,assignments:e.assignments.length}),c(t=>({...t,projects:e.projects,teams:e.teams,assignments:e.assignments,loading:!1,isConnected:!0}))}catch(e){console.error("❌ AgentMux API Error:",e),d(e)}},[]),m=(0,r.useCallback)(async()=>{try{let e=await l.getActivity();c(t=>({...t,activity:e}))}catch(e){d(e)}},[]),x=async e=>{try{let t=await l.createProject(e);c(e=>({...e,projects:[...e.projects,t]}))}catch(e){d(e)}},u=async(e,t)=>{try{let s=await l.updateProject(e,t);c(t=>({...t,projects:t.projects.map(t=>t.id===e?s:t)}))}catch(e){d(e)}},h=async e=>{try{await l.deleteProject(e),c(t=>{var s;return{...t,projects:t.projects.filter(t=>t.id!==e),selectedProject:(null==(s=t.selectedProject)?void 0:s.id)===e?void 0:t.selectedProject}})}catch(e){d(e)}},g=async e=>{try{let t=await l.createTeam(e);c(e=>({...e,teams:[...e.teams,t]}))}catch(e){d(e)}},b=async(e,t)=>{try{let s=await l.updateTeam(e,t);c(t=>({...t,teams:t.teams.map(t=>t.id===e?s:t)}))}catch(e){d(e)}},p=async e=>{try{await l.deleteTeam(e),c(t=>{var s;return{...t,teams:t.teams.filter(t=>t.id!==e),selectedTeam:(null==(s=t.selectedTeam)?void 0:s.id)===e?void 0:t.selectedTeam}})}catch(e){d(e)}},j=async(e,t)=>{try{let s=await l.createAssignment({projectId:e,teamId:t,status:"active",startedAt:new Date().toISOString()});c(e=>({...e,assignments:[...e.assignments,s]}))}catch(e){d(e)}},y=async(e,t)=>{try{let s=await l.updateAssignment(e,t);c(t=>({...t,assignments:t.assignments.map(t=>t.id===e?s:t)}))}catch(e){d(e)}},v=async e=>{try{await l.deleteAssignment(e),c(t=>{var s;return{...t,assignments:t.assignments.filter(t=>t.id!==e),selectedAssignment:(null==(s=t.selectedAssignment)?void 0:s.id)===e?void 0:t.selectedAssignment}})}catch(e){d(e)}};(0,r.useEffect)(()=>{let e=!0;o();let t=setInterval(async()=>{if(e)try{await l.health(),await o(),await m()}catch(t){e&&c(e=>({...e,isConnected:!1}))}},s);return()=>{e=!1,clearInterval(t)}},[s,m,o]);let f={...n,refreshData:o,refreshActivity:m,createProject:x,updateProject:u,deleteProject:h,selectProject:e=>{c(t=>({...t,selectedProject:e}))},createTeam:g,updateTeam:b,deleteTeam:p,selectTeam:e=>{c(t=>({...t,selectedTeam:e}))},createAssignment:j,updateAssignment:y,deleteAssignment:v,selectAssignment:e=>{c(t=>({...t,selectedAssignment:e}))},clearError:()=>{c(e=>({...e,error:void 0}))}};return(0,a.jsx)(i.Provider,{value:f,children:t})}function d(){let e=(0,r.useContext)(i);if(!e)throw Error("useAgentMux must be used within AgentMuxProvider");return e}let o=e=>{let{project:t}=e,{updateProject:s,deleteProject:n,assignments:l,teams:i}=d(),[c,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(t.name),[u,h]=(0,r.useState)(t.fsPath),g=l.find(e=>e.projectId===t.id&&"active"===e.status),b=g?i.find(e=>e.id===g.teamId):null,p=async()=>{m.trim()&&(await s(t.id,{name:m.trim(),fsPath:u.trim()}),o(!1))},j=async()=>{confirm('Archive project "'.concat(t.name,'"?'))&&await s(t.id,{status:"archived"})},y=async()=>{confirm('Delete project "'.concat(t.name,'"? This cannot be undone.'))&&await n(t.id)};return(0,a.jsxs)("div",{className:"project-card bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow p-4","data-testid":"project-".concat(t.id),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:c?(0,a.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"w-full font-semibold text-lg text-gray-900 border-b border-blue-300 focus:outline-none focus:border-blue-500",autoFocus:!0}):(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:t.name})}),(0,a.jsx)("div",{className:"flex items-center space-x-2 ml-2",children:!c&&(0,a.jsx)("button",{onClick:()=>o(!0),className:"text-gray-400 hover:text-blue-600 p-1",title:"Edit project",children:"✏️"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full border ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"idle":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(t.status)),"data-testid":"project-".concat(t.id,"-status"),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),b&&(0,a.jsxs)("span",{className:"text-sm text-blue-600 font-medium",children:["Team: ",b.name]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Path"}),c?(0,a.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full text-sm text-gray-700 bg-gray-50 border border-gray-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,a.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 rounded px-2 py-1 truncate font-mono",children:t.fsPath})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:[(0,a.jsxs)("div",{children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),t.lastActivity&&(0,a.jsxs)("div",{children:["Last active: ",new Date(t.lastActivity).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[c?(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:p,disabled:!m.trim(),className:"bg-blue-600 text-white px-3 py-1 text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:"Save"}),(0,a.jsx)("button",{onClick:()=>{x(t.name),h(t.fsPath),o(!1)},className:"bg-gray-300 text-gray-700 px-3 py-1 text-sm rounded hover:bg-gray-400",children:"Cancel"})]}):(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit Specs"}),!b&&(0,a.jsx)("button",{onClick:()=>{},className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Assign Team"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[!c&&"archived"!==t.status&&(0,a.jsx)("button",{onClick:j,className:"text-gray-500 hover:text-yellow-600 text-sm",title:"Archive project",children:"\uD83D\uDCE6"}),!c&&(0,a.jsx)("button",{onClick:y,className:"text-gray-500 hover:text-red-600 text-sm",title:"Delete project",children:"\uD83D\uDDD1️"})]})]})]})},m=e=>{let{team:t}=e,{updateTeam:s,deleteTeam:n,assignments:l,projects:i}=d(),[c,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(t.name),[u,h]=(0,r.useState)([...t.roles]),g=l.find(e=>e.teamId===t.id&&"active"===e.status),b=g?i.find(e=>e.id===g.projectId):null,p=e=>{switch(e.toLowerCase()){case"orchestrator":return"\uD83C\uDFAF";case"pm":return"\uD83D\uDCCB";case"dev":return"\uD83D\uDCBB";case"qa":return"\uD83E\uDDEA";default:return"\uD83D\uDC64"}},j=async()=>{if(m.trim()){if(!u.some(e=>"orchestrator"===e.name.toLowerCase()&&e.count>0))return void alert("Team must have at least one Orchestrator role");await s(t.id,{name:m.trim(),roles:u}),o(!1)}},y=async()=>{await s(t.id,{status:"active"})},v=async()=>{await s(t.id,{status:"paused"})},f=async()=>{confirm('Stop team "'.concat(t.name,'"? This will end any active assignments.'))&&await s(t.id,{status:"stopped"})},N=async()=>{confirm('Delete team "'.concat(t.name,'"? This cannot be undone.'))&&await n(t.id)},w=(e,t)=>{let s=[...u];s[e]={...s[e],...t},h(s)};return(0,a.jsxs)("div",{className:"team-card bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow p-4","data-testid":"team-".concat(t.id),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:c?(0,a.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"w-full font-semibold text-lg text-gray-900 border-b border-green-300 focus:outline-none focus:border-green-500",autoFocus:!0}):(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:t.name})}),(0,a.jsx)("div",{className:"flex items-center space-x-2 ml-2",children:!c&&(0,a.jsx)("button",{onClick:()=>o(!0),className:"text-gray-400 hover:text-green-600 p-1",title:"Edit team",children:"✏️"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full border ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"idle":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"paused":return"bg-orange-100 text-orange-800 border-orange-200";case"stopped":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(t.status)),"data-testid":"team-".concat(t.id,"-status"),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),b&&(0,a.jsxs)("span",{className:"text-sm text-blue-600 font-medium",children:["Project: ",b.name]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Roles"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(c?u:t.roles).map((e,t)=>(0,a.jsx)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:c?(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,a.jsx)("span",{className:"text-lg",children:p(e.name)}),(0,a.jsx)("input",{type:"text",value:e.name,onChange:e=>w(t,{name:e.target.value}),className:"flex-1 text-sm bg-white border border-gray-200 rounded px-2 py-1",disabled:"orchestrator"===e.name.toLowerCase()}),(0,a.jsx)("input",{type:"number",value:e.count,min:"0",onChange:e=>w(t,{count:parseInt(e.target.value)||0}),className:"w-16 text-sm bg-white border border-gray-200 rounded px-2 py-1"}),"orchestrator"!==e.name.toLowerCase()&&(0,a.jsx)("button",{onClick:()=>(e=>{if("orchestrator"===u[e].name.toLowerCase())return void alert("Cannot remove Orchestrator role");h(u.filter((t,s)=>s!==e))})(t),className:"text-red-500 hover:text-red-700 p-1",children:"\xd7"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:p(e.name)}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.count,")"]})]})},"".concat(e.name,"-").concat(t))),c&&(0,a.jsx)("button",{onClick:()=>{h([...u,{name:"custom",count:1}])},className:"w-full p-2 border-2 border-dashed border-gray-300 rounded text-gray-500 hover:border-green-300 hover:text-green-600 text-sm",children:"+ Add Role"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:[(0,a.jsxs)("div",{children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),t.lastActivity&&(0,a.jsxs)("div",{children:["Last active: ",new Date(t.lastActivity).toLocaleString()]}),t.tmuxSession&&(0,a.jsxs)("div",{children:["tmux: ",t.tmuxSession]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[c?(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:j,disabled:!m.trim(),className:"bg-green-600 text-white px-3 py-1 text-sm rounded hover:bg-green-700 disabled:opacity-50",children:"Save"}),(0,a.jsx)("button",{onClick:()=>{x(t.name),h([...t.roles]),o(!1)},className:"bg-gray-300 text-gray-700 px-3 py-1 text-sm rounded hover:bg-gray-400",children:"Cancel"})]}):(0,a.jsxs)("div",{className:"flex space-x-2",children:["idle"===t.status||"paused"===t.status?(0,a.jsx)("button",{onClick:y,className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"▶️ Start"}):"active"===t.status?(0,a.jsx)("button",{onClick:v,className:"text-orange-600 hover:text-orange-800 text-sm font-medium",children:"⏸️ Pause"}):null,"stopped"!==t.status&&(0,a.jsx)("button",{onClick:f,className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"⏹️ Stop"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[!c&&(0,a.jsx)("button",{onClick:()=>{},className:"text-gray-500 hover:text-blue-600 text-sm",title:"Duplicate team",children:"\uD83D\uDCCB"}),!c&&(0,a.jsx)("button",{onClick:N,className:"text-gray-500 hover:text-red-600 text-sm",title:"Delete team",children:"\uD83D\uDDD1️"})]})]})]})},x=e=>{let{projects:t,teams:s,assignments:n}=e,{createAssignment:l,updateAssignment:i,deleteAssignment:c}=d(),[o,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(null),h=t.map(e=>s.map(t=>{let s=n.find(s=>s.projectId===e.id&&s.teamId===t.id&&"active"===s.status);return{projectId:e.id,teamId:t.id,assignment:s}})),g=()=>{m(null)},b=e=>{e.preventDefault()},p=async e=>{let t=n.find(t=>t.teamId===e.teamId&&"active"===t.status);t&&await i(t.id,{status:"ended",endedAt:new Date().toISOString()}),await l(e.projectId,e.teamId),u(null)},j=async e=>{await i(e.id,{status:"paused"}),u(null)},y=async e=>{await i(e.id,{status:"active"}),u(null)},v=async e=>{await i(e.id,{status:"ended",endedAt:new Date().toISOString()}),u(null)};return 0===t.length&&0===s.length?(0,a.jsxs)("div",{className:"assignment-board-empty text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCB"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects or teams yet"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Create projects and teams first, then use the assignment board to connect them"})]}):(0,a.jsxs)("div",{className:"assignment-board",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"teams-column",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Teams"}),(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>{let s=n.find(t=>t.teamId===e.id&&"active"===t.status),r=s?t.find(e=>e.id===s.projectId):null;return(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>{m(e)},onDragEnd:g,className:(e=>{let t=n.some(t=>t.teamId===e.id&&"active"===t.status);return"team-drag-item p-2 mb-2 bg-white border rounded cursor-move hover:shadow-md transition-shadow ".concat(t?"border-blue-300 bg-blue-50":"border-gray-200")})(e),"data-testid":"team-".concat(e.id),children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.roles.length," roles"]}),r&&(0,a.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["→ ",r.name]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"assignment-grid lg:col-span-3",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4",children:["Assignment Grid",(0,a.jsx)("span",{className:"text-sm font-normal text-gray-500 ml-2",children:"(Click cells to assign, or drag teams to projects)"})]}),0===t.length?(0,a.jsx)("div",{className:"text-gray-500 text-center py-8",children:"No projects available. Create a project first."}):(0,a.jsx)("div",{className:"grid gap-4",children:t.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"project-row border border-gray-200 rounded-lg p-4",onDragOver:b,onDrop:t=>((e,t)=>{if(e.preventDefault(),o){let e={projectId:t,teamId:o.id};n.find(e=>e.teamId===o.id&&"active"===e.status)?u(e):l(t,o.id)}m(null)})(t,e.id),"data-testid":"project-".concat(e.id),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.fsPath})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:null==(r=h[t])?void 0:r.map(e=>s.find(t=>t.id===e.teamId)?(0,a.jsx)("button",{onClick:()=>(e=>{e.assignment||n.find(t=>t.teamId===e.teamId&&"active"===t.status)?u(e):l(e.projectId,e.teamId)})(e),className:"assignment-cell p-3 border border-gray-200 rounded text-sm transition-colors ".concat(e.assignment?"".concat((e=>{switch(e.status){case"active":return"bg-green-500 text-white";case"paused":return"bg-orange-500 text-white";case"ended":return"bg-gray-500 text-white";default:return"bg-gray-300 text-gray-700"}})(e.assignment)," hover:opacity-90"):"bg-gray-50 hover:bg-blue-50 hover:border-blue-300"),"data-testid":"assignment-cell-".concat(e.projectId,"-").concat(e.teamId),children:e.assignment?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Assigned"}),(0,a.jsx)("div",{className:"text-xs opacity-90",children:e.assignment.status})]}):(0,a.jsx)("div",{className:"text-gray-500",children:"Click to assign"})},"".concat(e.projectId,"-").concat(e.teamId)):null)})]},e.id)})})]})]}),x&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Assignment Action"}),x.assignment?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Team is currently assigned to this project. What would you like to do?"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:["active"===x.assignment.status?(0,a.jsx)("button",{onClick:()=>j(x.assignment),className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700",children:"Pause Assignment"}):(0,a.jsx)("button",{onClick:()=>y(x.assignment),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Resume Assignment"}),(0,a.jsx)("button",{onClick:()=>v(x.assignment),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"End Assignment"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Team may already be assigned to another project. Proceed with new assignment?"}),(0,a.jsx)("button",{onClick:()=>p(x),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mr-2",children:"Confirm Assignment"})]}),(0,a.jsx)("button",{onClick:()=>u(null),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 ml-2",children:"Cancel"})]})})]})},u=e=>{let{project:t,isOpen:s,onClose:n}=e,{createProject:l,updateProject:i,loading:c}=d(),[o,m]=(0,r.useState)({name:(null==t?void 0:t.name)||"",fsPath:(null==t?void 0:t.fsPath)||"",status:(null==t?void 0:t.status)||"active"}),[x,u]=(0,r.useState)(),h=async e=>{if(e.preventDefault(),u(void 0),!o.name.trim())return void u("Project name is required");if(!o.fsPath.trim())return void u("Filesystem path is required");try{t?await i(t.id,o):await l(o),n(),m({name:"",fsPath:"",status:"active"})}catch(e){u(e instanceof Error?e.message:"Failed to save project")}},g=e=>{let{name:t,value:s}=e.target;m(e=>({...e,[t]:s}))};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:t?"Edit Project":"Create Project"}),(0,a.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),x&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded text-red-700",children:x}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),(0,a.jsx)("input",{type:"text",name:"name",value:o.name,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"My AI Project",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filesystem Path *"}),(0,a.jsx)("input",{type:"text",name:"fsPath",value:o.fsPath,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"/path/to/project",required:!0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Absolute path to project directory"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{name:"status",value:o.status,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"idle",children:"Idle"}),(0,a.jsx)("option",{value:"archived",children:"Archived"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:c,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50",children:c?"Saving...":t?"Update":"Create"}),(0,a.jsx)("button",{type:"button",onClick:n,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400",children:"Cancel"})]})]})]})}):null},h=e=>{let{team:t,isOpen:s,onClose:n}=e,{createTeam:l,updateTeam:i,loading:c}=d(),[o,m]=(0,r.useState)({name:(null==t?void 0:t.name)||"",status:(null==t?void 0:t.status)||"active"}),[x,u]=(0,r.useState)((null==t?void 0:t.roles)||[{name:"orchestrator",count:1}]),[h,g]=(0,r.useState)(),b=async e=>{if(e.preventDefault(),g(void 0),!o.name.trim())return void g("Team name is required");if(0===x.length)return void g("At least one role is required");if(!x.some(e=>"orchestrator"===e.name&&e.count>0))return void g("Team must have at least 1 Orchestrator role");try{let e={...o,roles:x.filter(e=>e.count>0)};t?await i(t.id,e):await l(e),n(),m({name:"",status:"active"}),u([{name:"orchestrator",count:1}])}catch(e){g(e instanceof Error?e.message:"Failed to save team")}},p=e=>{let{name:t,value:s}=e.target;m(e=>({...e,[t]:s}))},j=(e,t,s)=>{u(a=>a.map((a,r)=>r===e?{...a,[t]:s}:a))};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:t?"Edit Team":"Create Team"}),(0,a.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),h&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded text-red-700",children:h}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Name *"}),(0,a.jsx)("input",{type:"text",name:"name",value:o.name,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Frontend Dev Team",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{name:"status",value:o.status,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"idle",children:"Idle"}),(0,a.jsx)("option",{value:"paused",children:"Paused"}),(0,a.jsx)("option",{value:"stopped",children:"Stopped"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Team Roles *"}),(0,a.jsx)("button",{type:"button",onClick:()=>{u(e=>[...e,{name:"dev",count:1}])},className:"text-green-600 hover:text-green-800 text-sm",children:"+ Add Role"})]}),(0,a.jsx)("div",{className:"space-y-2",children:x.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:e.name,onChange:e=>j(t,"name",e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,a.jsx)("option",{value:"orchestrator",children:"Orchestrator"}),(0,a.jsx)("option",{value:"pm",children:"Project Manager"}),(0,a.jsx)("option",{value:"dev",children:"Developer"}),(0,a.jsx)("option",{value:"qa",children:"QA Engineer"}),(0,a.jsx)("option",{value:"custom",children:"Custom Role"})]}),(0,a.jsx)("input",{type:"number",min:"0",max:"10",value:e.count,onChange:e=>j(t,"count",parseInt(e.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-sm text-center"}),x.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>{x.length>1&&u(e=>e.filter((e,s)=>s!==t))},className:"text-red-500 hover:text-red-700 px-1",children:"\xd7"})]},t))}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Note: Each team requires at least 1 Orchestrator role"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:c,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50",children:c?"Saving...":t?"Update":"Create"}),(0,a.jsx)("button",{type:"button",onClick:n,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400",children:"Cancel"})]})]})]})}):null},g=e=>{let{className:t=""}=e,{projects:s,teams:n,assignments:l,loading:i,error:c,isConnected:g,refreshData:b,clearError:p}=d(),[j,y]=(0,r.useState)("projects"),[v,f]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"agentmux-dashboard h-full flex flex-col ".concat(t),children:[(0,a.jsxs)("div",{className:"header bg-white border-b px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AgentMux"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:b,disabled:i,className:"text-blue-600 hover:text-blue-800 disabled:opacity-50",children:[i?"↻":"⟳"," Refresh"]}),(0,a.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium ".concat(g?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:g?"ONLINE":"OFFLINE"})]})]}),c&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-100 border border-red-300 rounded text-red-700",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("span",{children:c}),(0,a.jsx)("button",{onClick:p,className:"text-red-500 hover:text-red-700 ml-2",children:"\xd7"})]})})]}),(0,a.jsx)("div",{className:"nav-tabs bg-gray-50 border-b px-6",children:(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsxs)("button",{onClick:()=>y("projects"),className:"py-3 px-1 border-b-2 font-medium text-sm ".concat("projects"===j?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:["Projects (",s.length,")"]}),(0,a.jsxs)("button",{onClick:()=>y("teams"),className:"py-3 px-1 border-b-2 font-medium text-sm ".concat("teams"===j?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:["Teams (",n.length,")"]}),(0,a.jsxs)("button",{onClick:()=>y("assignments"),className:"py-3 px-1 border-b-2 font-medium text-sm ".concat("assignments"===j?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:["Assignment Board (",l.length,")"]})]})}),(0,a.jsxs)("div",{className:"tab-content flex-1 overflow-auto p-6",children:["projects"===j&&(0,a.jsxs)("div",{className:"projects-tab",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Projects"}),(0,a.jsx)("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ New Project"})]}),0===s.length?(0,a.jsxs)("div",{className:"empty-state text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC1"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first project to get started with AgentMux"}),(0,a.jsx)("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Create Project"})]}):(0,a.jsx)("div",{className:"projects-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,a.jsx)(o,{project:e},e.id))})]}),"teams"===j&&(0,a.jsxs)("div",{className:"teams-tab",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Teams"}),(0,a.jsx)("button",{onClick:()=>w(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"+ New Team"})]}),0===n.length?(0,a.jsxs)("div",{className:"empty-state text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDC65"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No teams yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first team with roles to start working on projects"}),(0,a.jsx)("button",{onClick:()=>w(!0),className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Create Team"})]}):(0,a.jsx)("div",{className:"teams-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>(0,a.jsx)(m,{team:e},e.id))})]}),"assignments"===j&&(0,a.jsxs)("div",{className:"assignments-tab",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Assignment Board"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Assign teams to projects by dragging and dropping or clicking the intersection cells"})]}),(0,a.jsx)(x,{projects:s,teams:n,assignments:l})]}),i&&(0,a.jsx)("div",{className:"loading-overlay fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"text-gray-900",children:"Loading..."})]})})}),(0,a.jsx)(u,{isOpen:v,onClose:()=>f(!1)}),(0,a.jsx)(h,{isOpen:N,onClose:()=>w(!1)})]})]})};function b(){return(0,a.jsx)(c,{children:(0,a.jsx)("div",{className:"h-screen flex flex-col bg-gray-50",children:(0,a.jsx)(g,{className:"flex-1"})})})}},8929:(e,t,s)=>{Promise.resolve().then(s.bind(s,8830))}},e=>{e.O(0,[441,255,358],()=>e(e.s=8929)),_N_E=e.O()}]);