{
	"name": "Build Project Tasks",
	"description": "Step-by-step process to generate detailed project tasks organized by milestone phases",
	"steps": [
		{
			"id": 1,
			"name": "Create Project Milestone Phases",
			"targetRole": "pgm",
			"delayMinutes": 3,
			"verification": {
				"type": "directory_contains_subdirs",
				"path": "{PROJECT_PATH}/.agentmux/tasks",
				"min_subdirs": 3,
				"subdir_pattern": "m[0-9]+_*"
			},
			"prompts": [
				"PROGRAM MANAGER BRIEFING - CREATE MILESTONE PHASES",
				"Project: {PROJECT_NAME}",
				"Path: {PROJECT_PATH}",
				"",
				"PROJECT GOAL:",
				"{INITIAL_GOAL}",
				"",
				"USER JOURNEY:",
				"{USER_JOURNEY}",
				"",
				"## Task 1: Analyze Project Specifications",
				"First, review all specification files in {PROJECT_PATH}/.agentmux/specs/ to understand:",
				"",
				"### Required Analysis:",
				"1. **Project Requirements** (from project.md):",
				"   - Core features and functionality scope",
				"   - Technical complexity and dependencies",
				"   - Success criteria and deliverables",
				"",
				"2. **Technical Architecture** (from *_design.md files):",
				"   - System components and their complexity",
				"   - Integration points and dependencies",
				"   - Technology stack requirements",
				"",
				"3. **Testing Requirements** (from integration_tests.md):",
				"   - Quality assurance scope",
				"   - Testing complexity and coverage needs",
				"",
				"## Task 2: Create Milestone Phase Structure",
				"Based on your analysis, create milestone phase directories under {PROJECT_PATH}/.agentmux/tasks/",
				"",
				"### Create Tasks Directory",
				"```bash",
				"mkdir -p {PROJECT_PATH}/.agentmux/tasks",
				"```",
				"",
				"### Standard Milestone Phases",
				"Create milestone directories using this naming convention: `m[number]_[phase_name]`",
				"",
				"**Required milestone phases (adapt based on project complexity):**",
				"",
				"```bash",
				"mkdir -p {PROJECT_PATH}/.agentmux/tasks/m1_foundation",
				"mkdir -p {PROJECT_PATH}/.agentmux/tasks/m2_core_development", 
				"mkdir -p {PROJECT_PATH}/.agentmux/tasks/m3_integration",
				"mkdir -p {PROJECT_PATH}/.agentmux/tasks/m4_testing_qa",
				"mkdir -p {PROJECT_PATH}/.agentmux/tasks/m5_deployment",
				"```",
				"",
				"**Additional milestone phases (create if needed based on project analysis):**",
				"- `m2_data_layer` - If significant database/data modeling work",
				"- `m3_frontend` - If substantial UI/UX development",
				"- `m3_backend` - If complex server-side logic",
				"- `m4_advanced_features` - If complex integrations or advanced functionality",
				"- `m6_optimization` - If performance/scalability is critical",
				"",
				"### Milestone Phase Guidelines:",
				"**Simple projects (3-4 milestones):**",
				"- m1_foundation, m2_development, m3_testing, m4_deployment",
				"",
				"**Medium projects (4-5 milestones):**",
				"- m1_foundation, m2_core_development, m3_integration, m4_testing_qa, m5_deployment",
				"",
				"**Complex projects (5-7 milestones):**",
				"- Include additional specialized phases based on technical requirements",
				"",
				"**Based on your specification analysis, create the appropriate milestone directories now.**"
			]
		},
		{
			"id": 2,
			"name": "Generate Task Files Within Milestones",
			"targetRole": "pgm",
			"delayMinutes": 8,
			"conditional": "only_if_milestone_dirs_exist",
			"verification": {
				"type": "milestone_subdirs_contain_files",
				"path": "{PROJECT_PATH}/.agentmux/tasks",
				"min_files_per_subdir": 2,
				"file_pattern": "*.md"
			},
			"prompts": [
				"⚠️ CONDITIONAL: Only proceed if milestone directories were successfully created in Step 1.",
				"",
				"## Task 3: Create Detailed Task Files Within Each Milestone",
				"",
				"Now create individual task markdown files within each milestone directory you created.",
				"",
				"### Task File Organization",
				"**Within each milestone directory (m1_*, m2_*, etc.), create task files using this naming convention:**",
				"- `01_task_name.md`",
				"- `02_task_name.md`", 
				"- `03_task_name.md`",
				"",
				"### Standard Milestone Content Guidelines:",
				"",
				"**m1_foundation/** (Project setup and infrastructure)",
				"- Environment setup and tooling configuration",
				"- Project structure and build system setup",
				"- Core dependencies and framework installation",
				"- Development environment validation",
				"",
				"**m2_core_development/** (Main application logic)",
				"- Core business logic implementation",
				"- Data models and persistence layer",
				"- Main application features and workflows",
				"- Basic API endpoints or core functionality",
				"",
				"**m3_integration/** (System integration and connections)",
				"- Frontend-backend integration",
				"- External API integrations",
				"- Database integration and data flow",
				"- Inter-component communication",
				"",
				"**m4_testing_qa/** (Quality assurance and testing)",
				"- Unit test implementation",
				"- Integration test development",
				"- End-to-end testing setup",
				"- Quality validation and bug fixes",
				"",
				"**m5_deployment/** (Production readiness)",
				"- Production configuration setup",
				"- Deployment pipeline creation",
				"- Monitoring and logging implementation",
				"- Launch preparation and validation",
				"",
				"### Task File Template",
				"**Each task file must follow this comprehensive structure:**",
				"",
				"```markdown",
				"# [Milestone].[Task Number]: [Task Title]",
				"",
				"## Objective",
				"Clear, specific description of what this task achieves",
				"",
				"## Prerequisites",
				"- Previous tasks that must be completed",
				"- Required tools, libraries, or setup",
				"- Dependencies on other milestones or external factors",
				"",
				"## Acceptance Criteria",
				"- [ ] Specific, measurable outcome 1",
				"- [ ] Specific, measurable outcome 2", 
				"- [ ] Functional requirement verification",
				"- [ ] Quality standard verification",
				"",
				"## Implementation Steps",
				"### Step 1: [Step Name]",
				"1. Detailed instruction with specific commands/code",
				"2. Configuration requirements",
				"3. File creation or modification tasks",
				"",
				"### Step 2: [Step Name]",
				"1. Next phase of implementation",
				"2. Integration or connection tasks",
				"3. Validation and testing steps",
				"",
				"## Testing Requirements",
				"- **Unit Tests**: Specific test cases to implement",
				"- **Integration Tests**: System integration validation",
				"- **Manual Testing**: User workflow validation steps",
				"",
				"## Definition of Done",
				"- [ ] All acceptance criteria completed and verified",
				"- [ ] Code implemented and reviewed",
				"- [ ] Tests written and passing with adequate coverage",
				"- [ ] Documentation updated",
				"- [ ] Feature integrated and deployable",
				"",
				"## Estimated Time: [X hours]",
				"## Priority: [Critical/High/Medium/Low]",
				"## Milestone Dependencies: [List of other milestone tasks]",
				"```",
				"",
				"**IMPORTANT TASK CREATION REQUIREMENTS:**",
				"- ✅ Create 2-5 task files per milestone directory",
				"- ✅ Ensure tasks are properly sequenced within each milestone",
				"- ✅ Make requirements crystal clear for 100% developer success",
				"- ✅ Include comprehensive implementation steps and testing",
				"- ✅ Specify dependencies between milestones and tasks",
				"",
				"**Create detailed task files now within each milestone directory based on your project analysis.**"
			]
		}
	],
	"workflow": {
		"step1": "Analyze specifications and create milestone phase directories (m1_*, m2_*, etc.)",
		"step2": "Generate detailed task files within each milestone directory with comprehensive instructions"
	},
	"expectedDeliverables": {
		"prerequisites": ["Project specifications must exist in .agentmux/specs/ directory"],
		"step1": [
			"Milestone phase directories created under .agentmux/tasks/",
			"Directory naming: m1_foundation, m2_core_development, m3_integration, etc.",
			"3-7 milestone directories based on project complexity analysis"
		],
		"step2": [
			"2-5 detailed task files per milestone directory",
			"Each task file includes: objectives, prerequisites, acceptance criteria, implementation steps, testing requirements",
			"Task files follow comprehensive template for 100% developer clarity",
			"Proper sequencing and dependency management between milestones and tasks"
		],
		"quality_standards": [
			"Tasks organized by logical milestone phases for better project management",
			"Each task provides crystal-clear requirements for developer success",
			"Dependencies between milestones and tasks are clearly identified",
			"Implementation steps are detailed enough for autonomous execution"
		],
		"notes": [
			"This workflow assumes specifications already exist in .agentmux/specs/",
			"Milestone structure adapts to project complexity (3-7 milestones)",
			"Each step includes verification criteria to ensure quality and completeness",
			"Tasks are organized hierarchically: Milestones > Individual Tasks > Implementation Steps"
		]
	}
}